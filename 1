import { useState, useEffect } from "react";
import { Progress } from "@/components/ui/progress";
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from "@/components/ui/select";
import { Button } from "@/components/ui/button";

const Index = () => {
  const [step, setStep] = useState(1);
  const [progress, setProgress] = useState(33);

  const handleDeviceSelect = (value: string) => {
    if (value) {
      setStep(2);
    }
  };

  useEffect(() => {
    if (step === 2) {
      const timer = setTimeout(() => {
        setProgress(77);
      }, 100);
      return () => clearTimeout(timer);
    }
  }, [step]);

  return (
    <div className="min-h-screen bg-background flex flex-col">
      <main className="flex-1 flex items-center justify-center p-4">
        <div className="bg-card rounded-2xl shadow-lg p-8 w-full max-w-md">
          {step === 1 ? (
            <div className="space-y-6">
              <Progress value={33} className="h-2" />
              
              <div className="text-center space-y-2">
                <h1 className="text-2xl font-bold text-card-foreground">
                  What type of device are you using?
                </h1>
                <p className="text-muted-foreground">
                  Please select your device.
                </p>
              </div>

              <Select onValueChange={handleDeviceSelect}>
                <SelectTrigger className="w-full">
                  <SelectValue placeholder="Select your device" />
                </SelectTrigger>
                <SelectContent className="bg-card">
                  <SelectItem value="ios">iOS</SelectItem>
                  <SelectItem value="android">Android</SelectItem>
                </SelectContent>
              </Select>
            </div>
          ) : (
            <div className="space-y-6">
              <div className="flex justify-center">
                <img
                  src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/22/Lululemon_Athletica_logo.svg/2048px-Lululemon_Athletica_logo.svg.png"
                  alt="Logo"
                  className="w-16 h-16 object-contain rounded-lg"
                />
              </div>

              <Progress 
                value={progress} 
                className="h-2 transition-all duration-700" 
              />

              <div className="text-center space-y-2">
                <h1 className="text-2xl font-bold text-card-foreground">
                  Almost there!
                </h1>
                <p className="text-muted-foreground">
                  Just a few more steps to start earning
                </p>
              </div>

              <div className="space-y-3 text-card-foreground">
                <p>1. Click the link belowüëá</p>
                <p>2. Enter your email and info‚úçÔ∏è</p>
                <p>3. Complete 1-2 deals *important* (most are quite fun, playing games etc)‚úîÔ∏è</p>
                <p>4. Claim your reward!üéÅ</p>
              </div>

              <a href="https://trkio.org/aff_c?offer_id=3117&aff_id=4344">
                <Button className="w-full text-lg py-6 bg-primary hover:bg-primary/90 text-primary-foreground">
                  Start Earning Now
                </Button>
              </a>
            </div>
          )}
        </div>
      </main>

      <footer className="py-6 text-center text-sm text-muted-foreground space-y-2">
        <div className="flex justify-center gap-4">
          <span>Privacy Policy</span>
          <span>Terms of Service</span>
          <span>Disclaimer</span>
        </div>
        <p>¬© 2025. All rights reserved.</p>
      </footer>
    </div>
  );
};

export default Index;
